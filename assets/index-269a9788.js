(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))t(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const f of s.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&t(f)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function t(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();var k;(function(e){e[e.End=0]="End",e[e.Byte=1]="Byte",e[e.Short=2]="Short",e[e.Int=3]="Int",e[e.Long=4]="Long",e[e.Float=5]="Float",e[e.Double=6]="Double",e[e.ByteArray=7]="ByteArray",e[e.String=8]="String",e[e.List=9]="List",e[e.Compound=10]="Compound",e[e.IntArray=11]="IntArray",e[e.LongArray=12]="LongArray"})(k||(k={}));class S{constructor(l){this.value=l}valueOf(){return this.value}}class E{constructor(l){this.value=l}valueOf(){return this.value}}class y{constructor(l){this.value=l}valueOf(){return this.value}}class O{constructor(l){this.value=l}valueOf(){return this.value}}const I=/^[0-9A-Za-z.+_-]+$/;function g(e,l={}){const n=!!l.pretty,t=l.breakLength||70,r=l.quote=="single"?"'":l.quote=="double"?'"':null,s=" ".repeat(4);function f(i){let a=r??'"';if(r==null)for(let c=0;c<i.length&&c<8;c++){switch(i[c]){case"'":a='"';break;case'"':a="'";break;default:continue}break}return`${a}${i.replace(RegExp(`[${a}\\\\]`,"g"),c=>`\\${c}`)}${a}`}function w(i,a){const c=n?" ":"",p=n?", ":",";if(i instanceof S)return`${i.value}b`;if(i instanceof E)return`${i.value}s`;if(i instanceof y)return`${i.value|0}`;if(typeof i=="bigint")return`${i}l`;if(i instanceof O)return`${i.value}f`;if(typeof i=="number")return Number.isInteger(i)?`${i}.0`:i.toString();if(typeof i=="string")return f(i);if(i instanceof Buffer||i instanceof Int8Array)return`[B;${c}${[...i].join(p)}]`;if(i instanceof Int32Array)return`[I;${c}${[...i].join(p)}]`;if(i instanceof BigInt64Array)return`[L;${c}${[...i].join(p)}]`;if(i instanceof Array){const h=i.map(u=>w(u,a+1));return h.reduce((u,m)=>u+m.length,0)>t||h.some(u=>u.includes(`
`))?`[
${h.map(u=>s.repeat(a)+u).join(`,
`)}
${s.repeat(a-1)}]`:`[${h.join(p)}]`}else{const h=(i instanceof Map?[...i]:Object.entries(i).filter(([u,m])=>m!=null)).map(([u,m])=>(I.test(u)||(u=f(u)),`${u}:${c}${w(m,a+1)}`));return n&&h.reduce((u,m)=>u+m.length,0)>t?`{
${h.map(u=>s.repeat(a)+u).join(`,
`)}
${s.repeat(a-1)}}`:`{${c}${h.join(p)}${c}}`}}return w(e,1)}function D(e,l={}){let n=0,t=0,r="";const s=()=>new Error("Unexpected end"),f=o=>new Error(`Unexpected character ${e[n]} at position ${n}`);function w(){for(;n<e.length;){if(e[n]!=" "&&e[n]!=`
`)return;n+=1}}function i(){if(!"-0123456789".includes(e[n]))return null;t=n++;let o=!1;for(;n<e.length;)if(r=e[n++],!"0123456789".includes(r))if(r=="."){if(o)return n--,null;o=!0}else return r=="f"||r=="F"?new O(+e.slice(t,n-1)):r=="d"||r=="D"?+e.slice(t,n-1):r=="b"||r=="B"?new S(+e.slice(t,n-1)):r=="s"||r=="S"?new E(+e.slice(t,n-1)):r=="l"||r=="L"?BigInt(e.slice(t,n-1)):o?+e.slice(t,--n):new y(+e.slice(t,--n));return o?+e.slice(t,n):new y(+e.slice(t,n))}function a(){for(t=n;n<e.length&&I.test(e[n]);)n++;if(n-t==0)throw n==e.length?s():f();return e.slice(t,n)}function c(){const o=e[n];t=++n;let d="";for(;n<e.length;)if(r=e[n++],r=="\\")d+=e.slice(t,n-1)+e[n],t=++n;else if(r==o)return d+e.slice(t,n-1);throw s()}function p(){return e[n]=='"'||e[n]=="'"?c():a()}function h(o,d){if(w(),e[n]==","){if(o)throw f();n++,w()}else if(!o&&e[n]!=d)throw f()}function u(){const o=[];let d=!0;for(;;){if(h(d,"}"),d=!1,e[n]=="}")return n++,l.useMaps?new Map(o):o.reduce((A,[C,U])=>(A[C]=U,A),{});const b=p();if(w(),e[n++]!=":")throw f();o.push([b,L()])}}function m(o){const d=[];for(;n<e.length;){if(h(d.length==0,"]"),e[n]=="]"){if(n++,o=="B")return Buffer.from(d.map(b=>+b));if(o=="I")return Int32Array.from(d.map(b=>+b));if(o=="L")return BigInt64Array.from(d.map(b=>BigInt(b)))}for(t=n,e[n]=="-"&&n++;n<e.length&&"0123456789".includes(e[n]);)n++;if(n-t==0||I.test(e[n]))throw f();d.push(e.slice(t,n))}throw s()}function q(){if("BILbil".includes(e[n])&&e[n+1]==";")return m(e[(n+=2)-2].toUpperCase());const o=[];for(;n<e.length;){if(w(),e[n]==","){if(o.length==0)throw f();n++,w()}else if(o.length>0&&e[n]!="]")throw f();if(e[n]=="]")return n++,o;o.push(L())}throw s()}function L(){if(w(),t=n,r=e[n],r=="{")return n++,u();if(r=="[")return n++,q();if(r=='"'||r=="'")return c();const o=i();return o!=null&&(n==e.length||!I.test(e[n]))?o:e.slice(t,n)+a()}return L()}let v=$("#outputArea"),B;async function F(){let e=document.getElementById("fileInput"),l=$("#submitBtn");l.attr("disabled",!0),B=e.files[0];let n=await B.text();try{let t=await j(n);v.val(t)}catch{v.val("エラー: 変換できませんでした")}$("#output").css("display","block"),l.attr("disabled",!1)}async function j(e,l){let n=D(e);return g(n,{quote:"single",pretty:l}).replace(new RegExp("(?<!\\\\)'","g"),'"')}$("#copy").on("click",function(){navigator.clipboard==null?window.clipboardData.setData("Text",v.val()):navigator.clipboard.writeText(v.val())});$("#download").on("click",function(){const e=new Blob([v.val()],{type:"text/plain"}),l=document.createElement("a");l.href=URL.createObjectURL(e),l.download="toolbox-"+B.name,l.click()});$("#pretty").on("click",async function(){try{let e=v.val();v.val(await j(e,!0))}catch{alert("エラー: 整形に失敗しました")}});window.submit=F;
